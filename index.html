<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>APS Game HUB</title>
<style>
:root{
  --bg:#0f1724; --card:#0b1220; --accent:#7c3aed; --accent-hover:#a78bfa; --muted:#94a3b8; --glass: rgba(255,255,255,0.03);
  --max-width:1200px;
  font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
}
*{box-sizing:border-box}
body{margin:0; background:linear-gradient(180deg,#071025 0%, #071827 60%); color:#e6eef8; -webkit-font-smoothing:antialiased; display:flex; flex-direction:column; min-height:100vh;}
.container{max-width:var(--max-width); margin:0 auto; padding:0 16px; flex:1 0 auto;}

/* Fixed Header & Nav */
header.header{display:flex; align-items:center; justify-content:center; position:fixed; top:0; left:0; right:0; background:rgba(15,23,36,0.95); backdrop-filter:blur(6px); z-index:999; flex-direction:column; padding:12px 16px; border-bottom:1px solid rgba(124,58,237,0.15);}
header .logo{position:absolute; left:16px; top:12px; width:52px; height:52px; display:flex; align-items:center; justify-content:center; border-radius:8px; overflow:hidden;}
header .logo img{width:100%; height:100%; object-fit:contain;}
header .title{font-size:1.75rem; font-weight:700; text-align:center; color:#0EE862; margin:0; letter-spacing:0.6px}

nav.topnav{margin-top:16px; margin-bottom:8px; display:flex; justify-content:center; width:100%;}
nav.topnav .tabs{display:flex; gap:12px; backdrop-filter:blur(6px); background:rgba(255,255,255,0.03); padding:6px 12px; border-radius:12px}
nav.topnav .tab{padding:8px 16px; border-radius:8px; background:transparent; border:none; color:var(--muted); font-weight:600; cursor:pointer; position:relative; transition: all 0.3s ease;}
nav.topnav .tab:hover{color:white; box-shadow:0 0 12px rgba(124,58,237,0.5);}
nav.topnav .tab.active{color:white; box-shadow:0 0 16px rgba(124,58,237,0.8);}
nav.topnav .tab.active::after{content:''; position:absolute; bottom:-4px; left:10%; width:80%; height:3px; background:linear-gradient(90deg,var(--accent),#06b6d4); border-radius:2px;}

main{margin-top:140px; padding-bottom:40px; flex:1}

/* content grids */
.tile-grid{display:grid; grid-template-columns:repeat(4,1fr); gap:12px}
@media (max-width:1100px){ .tile-grid{grid-template-columns:repeat(3,1fr)} }
@media (max-width:820px){ .tile-grid{grid-template-columns:repeat(2,1fr)} }
@media (max-width:520px){ 
	.tile-grid{
		grid-template-columns:repeat(1,1fr);
		gap:8px !important;
	}
	.tile{
		padding:8px !important;
		border-radius:8px !important;
		width:60%;
		margin-left:20%;
	}
	.img{
		height:100% !important;
	}
	.tile .meta{
		font-size:0.8rem !important;
	}
	.btn{
		padding:6px 10px !important;
		font-size:0.8rem !important;
	}
}
.tile{background:var(--card); border-radius:12px; overflow:hidden; padding:12px; display:flex; flex-direction:column; align-items:stretch; gap:8px;}
.tile .img{width:100%; aspect-ratio:3/4; object-fit:cover; border-radius:8px; display:block}
.tile .meta{display:flex; justify-content:space-between; align-items:center}
.btn{display:inline-block; padding:8px 12px; border-radius:8px; border:0; cursor:pointer; font-weight:700}
.btn.play{background:var(--accent); color:white}
.btn.learn{background:var(--accent); color:white; border:1px solid rgba(124,58,237,0.16)}

/* leaderboard mini table */
.lb-title{text-align:center; font-weight:700; font-size:1.1rem; margin-bottom:6px; color:#e2e8f0}
.lb-table{width:100%; border-collapse:collapse; color:#dbeafe; font-size:0.85rem}
.lb-table th, .lb-table td{padding:4px 6px; border-bottom:1px solid rgba(255,255,255,0.05); text-align:left}
.lb-table th{color:var(--muted); font-weight:600}

/* footer */
footer{padding:18px; text-align:center; color:var(--muted); font-size:14px; flex-shrink:0}

/* modal */
.modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(15,23,36,0.95);display:flex;justify-content:center;align-items:center;padding:16px;z-index:1000;opacity:0;pointer-events:none;transition:opacity 0.3s}
.modal.active{opacity:1;pointer-events:auto}
.modal-content{background:#0b1220;padding:24px;border-radius:10px;max-width:800px;width:100%;max-height:90vh;overflow:auto;position:relative}
.modal-close{position:absolute;top:12px;right:12px;background:var(--accent);color:#012;border:none;padding:6px 10px;font-weight:700;border-radius:6px;cursor:pointer}
</style>
</head>
<body>
<div class="container">
<header class="header">
  <div class="logo"><img src="https://wenurarandunu.github.io/Game-Hub/Images/aps.png" alt="APS Logo"></div>
  <div class="title">APS Game HUB</div>
  <nav class="topnav">
    <div class="tabs">
      <button class="tab active" data-tab="games">Games</button>
      <button class="tab" data-tab="study">Study</button>
      <button class="tab" data-tab="leaderboard">Leader-board</button>
    </div>
  </nav>
</header>

<main>
  <section id="games" class="content-section">
    <div id="games-grid" class="tile-grid"></div>
  </section>

  <section id="study" class="content-section" style="display:none">
    <div id="study-grid" class="tile-grid"></div>
  </section>

  <section id="leaderboard" class="content-section" style="display:none">
    <div id="leaderboard-grid" class="tile-grid"></div>
  </section>
</main>

<footer>¬© APS Game HUB ‚Äî Built with HTML, CSS & JavaScript. Responsive across mobile and desktop.</footer>
</div>

<div class="modal" id="learnModal">
  <div class="modal-content">
    <button class="modal-close" id="modalClose">Close</button>
    <div id="modalBody"></div>
  </div>
</div>

<script>
const baseURL = "https://wenurarandunu.github.io/Game-Hub/Images/";

// === Games Tiles ===
const games = [
  { id: 'g1', title: 'FORMULA 1 ATL GRAND PRIX', img: baseURL + 'sampleGame.png', url: '#' },
  { id: 'g2', title: 'FORMULA 1 ATL GRAND PRIX', img: baseURL + 'sampleGame.png', url: '#' },
  { id: 'g3', title: 'FORMULA 1 ATL GRAND PRIX', img: baseURL + 'sampleGame.png', url: '#' },
  { id: 'g4', title: 'FORMULA 1 ATL GRAND PRIX', img: baseURL + 'sampleGame.png', url: '#' },
  { id: 'g5', title: 'FORMULA 1 ATL GRAND PRIX', img: baseURL + 'sampleGame.png', url: '#' },
  { id: 'g6', title: 'FORMULA 1 ATL GRAND PRIX', img: baseURL + 'sampleGame.png', url: '#' },
  { id: 'g7', title: 'FORMULA 1 ATL GRAND PRIX', img: baseURL + 'sampleGame.png', url: '#' },
  { id: 'g8', title: 'FORMULA 1 ATL GRAND PRIX', img: baseURL + 'sampleGame.png', url: '#' },
  { id: 'g9', title: 'FORMULA 1 ATL GRAND PRIX', img: baseURL + 'sampleGame.png', url: '#' },
  { id: 'g10', title: 'FORMULA 1 ATL GRAND PRIX', img: baseURL + 'sampleGame.png', url: '#' },
  { id: 'g11', title: 'FORMULA 1 ATL GRAND PRIX', img: baseURL + 'sampleGame.png', url: '#' },
  { id: 'g12', title: 'FORMULA 1 ATL GRAND PRIX', img: baseURL + 'sampleGame.png', url: '#' }
];

// === Study Tiles ===
const study = [
  { title: 'Study 1', img: baseURL + 'study.jpg', desc: 'Learn about traffic rules.' },
  { title: 'Study 2', img: baseURL + 'study.jpg', desc: 'Physics of car movement.' },
  { title: 'Study 3', img: baseURL + 'study.jpg', desc: 'Understanding acceleration and brakes.' },
  { title: 'Study 4', img: baseURL + 'study.jpg', desc: 'Learn cornering and turning techniques.' },
  { title: 'Study 5', img: baseURL + 'study.jpg', desc: 'Mastering game controls.' },
  { title: 'Study 6', img: baseURL + 'study.jpg', desc: 'How to improve reaction time.' },
  { title: 'Study 7', img: baseURL + 'study.jpg', desc: 'Optimizing vehicle handling.' },
  { title: 'Study 8', img: baseURL + 'study.jpg', desc: 'Basics of racing strategy.' },
  { title: 'Study 9', img: baseURL + 'study.jpg', desc: 'Avoiding collisions effectively.' },
  { title: 'Study 10', img: baseURL + 'study.jpg', desc: 'Improving focus during gameplay.' },
  { title: 'Study 11', img: baseURL + 'study.jpg', desc: 'Understanding leaderboard rankings.' },
  { title: 'Study 12', img: baseURL + 'study.jpg', desc: 'Tips for consistent high performance.' }
];

const gamesGrid = document.getElementById('games-grid');
const studyGrid = document.getElementById('study-grid');
const leaderboardGrid = document.getElementById('leaderboard-grid');
const modal = document.getElementById('learnModal');
const modalBody = document.getElementById('modalBody');
const modalClose = document.getElementById('modalClose');

// üéÆ Render Games
games.forEach(g => {
  const tile = document.createElement('div');
  tile.className = 'tile';
  tile.innerHTML = `
    <img class='img' src='${g.img}' alt='${g.title}'>
    <div class='meta'>
      <div>${g.title}</div>
      <button class='btn play'>Play</button>
    </div>`;
  tile.querySelector('.btn.play').addEventListener('click', () => window.open(g.url, '_blank'));
  gamesGrid.appendChild(tile);
});

// üìñ Render Study
study.forEach(s => {
  const tile = document.createElement('div');
  tile.className = 'tile';
  tile.innerHTML = `
    <img class='img' src='${s.img}' alt='${s.title}'>
    <div class='meta'>
      <div>${s.title}</div>
      <button class='btn learn'>Learn</button>
    </div>`;
  tile.querySelector('.btn.learn').addEventListener('click', () => {
    modalBody.innerHTML = `<h2>${s.title}</h2><p>${s.desc}</p>`;
    modal.classList.add('active');
  });
  studyGrid.appendChild(tile);
});

// üèÜ Fetch leaderboard dynamically from Google Sheets Web App
const WEB_APP_URL = 'https://script.google.com/macros/s/AKfycbytA6dJrsUmyXYvrt7nkXvrAqVAD0CqNL1FxRW9Ar3N6G-KGOlFflCa_CJLa-MuHG8S/exec'; // <-- Replace with your deployed Google Apps Script Web App URL

function fetchLeaderboard() {
  fetch(WEB_APP_URL)
    .then(res => res.json())
    .then(topScores => {
      leaderboardGrid.innerHTML = ''; // clear previous
      topScores.forEach((entry, index) => {
        const tile = document.createElement('div');
        tile.className = 'tile';
        tile.innerHTML = `
          <div class='lb-title'>${entry.department}</div>
          <table class='lb-table'>
            <thead><tr><th>#</th><th>Employee</th><th>Score</th></tr></thead>
            <tbody>
              <tr><td>${index+1}</td><td>${entry.employeeNumber}</td><td>${entry.score}</td></tr>
            </tbody>
          </table>`;
        leaderboardGrid.appendChild(tile);
      });
    })
    .catch(err => console.error('Error fetching leaderboard:', err));
}

fetchLeaderboard(); // initial fetch

// üìò Modal controls
modalClose.addEventListener('click', () => modal.classList.remove('active'));
modal.addEventListener('click', e => { if (e.target === modal) modal.classList.remove('active'); });

// üîñ Tabs switching
const tabs = document.querySelectorAll('.tab');
const sections = document.querySelectorAll('.content-section');
tabs.forEach(btn => btn.addEventListener('click', () => {
  tabs.forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  const tab = btn.dataset.tab;
  sections.forEach(s => s.style.display = s.id === tab ? '' : 'none');
}));
</script>
</body>
</html>
